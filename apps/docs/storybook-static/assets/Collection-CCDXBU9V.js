import{S as c}from"./Primitive-B5VkAsKh.js";import{u as m}from"./usePrimitiveElement-JmSCNQYd.js";import{b as h,d as u,y as w,M as k,h as f,w as x,c as v,p as T,r as p}from"./vue.esm-bundler-BitZzlT5.js";const d="data-reka-collection-item";function b(M={}){const{key:A="",isProvider:y=!1}=M,s=`${A}CollectionProvider`;let e;if(y){const r=p(new Map);e={collectionRef:p(),itemMap:r},T(s,e)}else e=h(s);const C=(r=!1)=>{const o=e.collectionRef.value;if(!o)return[];const l=Array.from(o.querySelectorAll(`[${d}]`)),t=Array.from(e.itemMap.value.values()).sort((i,a)=>l.indexOf(i.ref)-l.indexOf(a.ref));return r?t:t.filter(i=>i.ref.dataset.disabled!=="")},E=u({name:"CollectionSlot",inheritAttrs:!1,setup(r,{slots:o,attrs:l}){const{primitiveElement:n,currentElement:t}=m();return x(t,()=>{e.collectionRef.value=t.value}),()=>f(c,{ref:n,...l},o)}}),I=u({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(r,{slots:o,attrs:l}){const{primitiveElement:n,currentElement:t}=m();return w(i=>{if(t.value){const a=k(t.value);e.itemMap.value.set(a,{ref:t.value,value:r.value}),i(()=>e.itemMap.value.delete(a))}}),()=>f(c,{...l,[d]:"",ref:n},o)}}),R=v(()=>Array.from(e.itemMap.value.values())),S=v(()=>e.itemMap.value.size);return{getItems:C,reactiveItems:R,itemMapSize:S,CollectionSlot:E,CollectionItem:I}}export{b as u};
