import{w as S,o as $,a as A,d as L,C as T,D as b,E as k,G as z,K as H,f as C,S as I,_ as W,$ as B,c as D}from"./vue.esm-bundler-BitZzlT5.js";import{u as R,f as U,p as G,m as E,P}from"./index-BcdZTg5d.js";let X=0;function K(a){const i=new WeakMap,l=R();function m(o){if(a.mode!=="popLayout")return;const u=o.offsetParent,y=u instanceof HTMLElement&&u.offsetWidth||0,s={height:o.offsetHeight||0,width:o.offsetWidth||0,top:o.offsetTop,left:o.offsetLeft,right:0};s.right=y-s.width-s.left;const g=a.anchorX==="left"?`left: ${s.left}px`:`right: ${s.right}px`,v=`pop-${X++}`;o.dataset.motionPopId=v;const p=document.createElement("style");l.value.nonce&&(p.nonce=l.value.nonce),i.set(o,p),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
    [data-motion-pop-id="${v}"] {
      position: absolute !important;
      width: ${s.width}px !important;
      height: ${s.height}px !important;
      top: ${s.top}px !important;
      ${g} !important;
      }
      `)}function h(o){const u=i.get(o);u&&(i.delete(o),U.render(()=>{document.head.removeChild(u)}))}return{addPopStyle:m,removePopStyle:h}}function N(a){const i=new Map,l=new Set,{addPopStyle:m,removePopStyle:h}=K(a);function o(t,n){let e=i.get(t);e||(e={motions:new Set,exitingMotions:new Set,el:t},i.set(t,e)),e.motions.add(n)}function u(t,n){const e=i.get(t);e&&(e.exitingMotions.delete(n),e.exitingMotions.size===0&&e.done&&p(e))}function y(t){l.add(t)}function s(t){l.delete(t)}const g={initial:a.initial,custom:a.custom,register:o,onMotionExitComplete:u,registerPending:y,unregisterPending:s};S(()=>a.custom,t=>{g.custom=t},{flush:"pre"}),G(g),$(()=>{g.initial=void 0});function v(t){if(t instanceof HTMLElement&&!t.hasAttribute(P)){t.setAttribute(P,"");const n=E.get(t);n&&!n.presenceContainer&&(n.presenceContainer=t,o(t,n))}}function p(t){var n,e,d,x,c;h(t.el),(n=t.done)==null||n.call(t),t.done=void 0,(e=t.el)!=null&&e.isConnected?(x=(d=t.motions.values().next())==null?void 0:d.value)==null||x.didUpdate():(t.motions.forEach(f=>{f.unmount()}),t.motions.clear()),(c=a.onExitComplete)==null||c.call(a)}function _(t,n){v(t);const e=i.get(t);e&&(e.exitingMotions.clear(),e.motions.forEach(d=>{d.setActive("exit",!1),d.getSnapshot(d.options,!0)})),n()}function w(t,n){var e,d,x;const c=t;v(c),l.forEach(r=>{r.element&&c.contains(r.element)&&(r.presenceContainer=c,o(c,r),l.delete(r))});const f=i.get(c),M=E.get(c);if((!f||f.motions.size===0)&&!M){n(),(e=a.onExitComplete)==null||e.call(a);return}f.done=n,m(c),f.motions.forEach(r=>{f.exitingMotions.add(r),r.setActive("exit",!0),r.getSnapshot(r.options,!1)}),(x=(d=f.motions.values().next())==null?void 0:d.value)==null||x.didUpdate()}return A(()=>{i.forEach(t=>{t.motions.forEach(n=>{n.unmount()})}),i.clear()}),{enter:_,exit:w}}const F=L({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(a){const i=a,{enter:l,exit:m}=N(i),h=D(()=>i.mode!=="wait"?{tag:i.as}:{mode:i.mode==="wait"?"out-in":void 0});return(o,u)=>(T(),b(I(o.mode==="wait"?W:B),H(h.value,{appear:"",onLeave:C(m),onEnter:C(l)}),{default:k(()=>[z(o.$slots,"default")]),_:3},16,["onLeave","onEnter"]))}}),J={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},O={initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30}},Q={initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.98},transition:{duration:.15}};export{F as _,Q as e,O as i,J as t};
