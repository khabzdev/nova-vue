import{c as q}from"./createContext-Fl0g0pNq.js";import{u as G}from"./useDirection-C1R3tBjc.js";import{P as x}from"./Primitive-B5VkAsKh.js";import{u as O}from"./Collection-CCDXBU9V.js";import{f as P,E as k,a as M}from"./utils-D788IsuB.js";import{d as N,B as V,C as w,D as A,E as g,L as D,f as i,G as $,r as c}from"./vue.esm-bundler-BitZzlT5.js";import{a as U}from"./index-BGV6KQZa.js";const[X,j]=q("RovingFocusGroup");var K=N({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(F,{expose:b,emit:I}){const a=F,f=I,{loop:S,orientation:p,dir:y}=V(a),v=G(y),l=U(a,"currentTabStopId",f,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),s=c(!1),n=c(!1),d=c(0),{getItems:m,CollectionSlot:C}=O({isProvider:!0});function T(e){const o=!n.value;if(e.currentTarget&&e.target===e.currentTarget&&o&&!s.value){const r=new CustomEvent(k,M);if(e.currentTarget.dispatchEvent(r),f("entryFocus",r),!r.defaultPrevented){const u=m().map(t=>t.ref).filter(t=>t.dataset.disabled!==""),E=u.find(t=>t.getAttribute("data-active")===""),R=u.find(t=>t.getAttribute("data-highlighted")===""),_=u.find(t=>t.id===l.value),B=[E,R,_,...u].filter(Boolean);P(B,a.preventScrollOnEntryFocus)}}n.value=!1}function h(){setTimeout(()=>{n.value=!1},1)}return b({getItems:m}),j({loop:S,dir:v,orientation:p,currentTabStopId:l,onItemFocus:e=>{l.value=e},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{d.value++},onFocusableItemRemove:()=>{d.value--}}),(e,o)=>(w(),A(i(C),null,{default:g(()=>[D(i(x),{tabindex:s.value||d.value===0?-1:0,"data-orientation":i(p),as:e.as,"as-child":e.asChild,dir:i(v),style:{outline:"none"},onMousedown:o[0]||(o[0]=r=>n.value=!0),onMouseup:h,onFocus:T,onBlur:o[1]||(o[1]=r=>s.value=!1)},{default:g(()=>[$(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Z=K;export{Z as R,X as i};
