import{d,r as _,C as f,D as c,E as v,G as p,f as u,y as L,F as $,o as k,a as x,c as g,B as y,w as E,a2 as b,a3 as I,K as C}from"./vue.esm-bundler-BitZzlT5.js";import{j as M}from"./index-I_2vzNuA-BfX5bdph.js";import{c as F}from"./createContext-Fl0g0pNq.js";import{u as w}from"./useForwardExpose-ClhNePUc.js";import{P as A}from"./Primitive-B5VkAsKh.js";import{a as B}from"./index-CvzWs3kq.js";import{W as S}from"./cn-gWiv5-6R-CwNMvQqb.js";const[R,j]=F("AvatarRoot");var W=d({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){return w(),j({imageLoadingStatus:_("idle")}),(e,l)=>(f(),c(u(A),{"as-child":e.asChild,as:e.as},{default:v(()=>[p(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),D=W,N=d({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const e=a,l=R();w();const s=_(e.delayMs===void 0);return L(t=>{if(e.delayMs&&B){const o=window.setTimeout(()=>{s.value=!0},e.delayMs);t(()=>{window.clearTimeout(o)})}}),(t,o)=>s.value&&u(l).imageLoadingStatus.value!=="loaded"?(f(),c(u(A),{key:0,"as-child":t.asChild,as:t.as},{default:v(()=>[p(t.$slots,"default")]),_:3},8,["as-child","as"])):$("v-if",!0)}}),T=N;function z(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function G(a,{referrerPolicy:e,crossOrigin:l}={}){const s=_(!1),t=_(null),o=g(()=>s.value?(!t.value&&B&&(t.value=new window.Image),t.value):null),n=_(z(o.value,a.value)),m=i=>()=>{s.value&&(n.value=i)};return k(()=>{s.value=!0,L(i=>{const r=o.value;if(!r)return;n.value=z(r,a.value);const h=m("loaded"),q=m("error");r.addEventListener("load",h),r.addEventListener("error",q),e!=null&&e.value&&(r.referrerPolicy=e.value),typeof(l==null?void 0:l.value)=="string"&&(r.crossOrigin=l.value),i(()=>{r.removeEventListener("load",h),r.removeEventListener("error",q)})})}),x(()=>{s.value=!1}),n}var K=d({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(a,{emit:e}){const l=a,s=e,{src:t,referrerPolicy:o,crossOrigin:n}=y(l);w();const m=R(),i=G(t,{referrerPolicy:o,crossOrigin:n});return E(i,r=>{s("loadingStatusChange",r),r!=="idle"&&(m.imageLoadingStatus.value=r)},{immediate:!0}),(r,h)=>b((f(),c(u(A),{role:"img","as-child":r.asChild,as:r.as,src:u(t),referrerpolicy:u(o),crossorigin:u(n)},{default:v(()=>[p(r.$slots,"default")]),_:3},8,["as-child","as","src","referrerpolicy","crossorigin"])),[[I,u(i)==="loaded"]])}}),P=K;const Z=d({__name:"Avatar",props:{size:{default:"default"},class:{},asChild:{type:Boolean},as:{}},setup(a){const e=M(["relative flex shrink-0 overflow-hidden","rounded-full"],{variants:{size:{xs:"size-6",sm:"size-8",default:"size-10",lg:"size-12",xl:"size-16","2xl":"size-20"}},defaultVariants:{size:"default"}}),l=a,{size:s,class:t}=y(l),o=g(()=>S(e({size:s.value}),t.value));return(n,m)=>(f(),c(u(D),C({class:o.value},n.$attrs),{default:v(()=>[p(n.$slots,"default")]),_:3},16,["class"]))}}),O=d({__name:"AvatarImage",props:{class:{},src:{},alt:{}},setup(a){const e=a,l=g(()=>S("aspect-square h-full w-full object-cover",e.class));return(s,t)=>(f(),c(u(P),C({src:e.src,class:l.value},s.$attrs),{default:v(()=>[p(s.$slots,"default")]),_:3},16,["src","class"]))}}),ee=d({__name:"AvatarFallback",props:{class:{default:""},delayMs:{},asChild:{type:Boolean},as:{}},setup(a){const e=a,{class:l}=y(e),s=g(()=>S("flex h-full w-full items-center justify-center rounded-full bg-muted text-muted-foreground font-medium",l.value));return(t,o)=>(f(),c(u(T),C({class:s.value},t.$attrs),{default:v(()=>[p(t.$slots,"default")]),_:3},16,["class"]))}});export{ee as B,Z as w,O as y};
