import{i as U}from"./ConfigProvider-CB94jlZd.js";import{c as L,r as E,w as P,n as x,a as N,d as R,y as B,C as q,D as I,E as $,G as H,f as Y,v as G}from"./vue.esm-bundler-BitZzlT5.js";import{c as X,u as V}from"./index-BGV6KQZa.js";import{e as z,f as J,a as W,g as T,h as Q}from"./index-CvzWs3kq.js";import{g as A}from"./getActiveElement-FUKBWQwh.js";import{u as Z}from"./useForwardExpose-ClhNePUc.js";import{P as ee}from"./Primitive-B5VkAsKh.js";import{f as b,A as O,a as te,g as ne,b as _,E as M,c as re}from"./utils-T_AZzJOL.js";function k(e){if(e===null||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);return n!==null&&n!==Object.prototype&&Object.getPrototypeOf(n)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function C(e,n,t=".",o){if(!k(n))return C(e,{},t,o);const u=Object.assign({},n);for(const i in e){if(i==="__proto__"||i==="constructor")continue;const c=e[i];c!=null&&(o&&o(u,i,c,t)||(Array.isArray(c)&&Array.isArray(u[i])?u[i]=[...c,...u[i]]:k(c)&&k(u[i])?u[i]=C(c,u[i],(t?`${t}.`:"")+i.toString(),o):u[i]=c))}return u}function oe(e){return(...n)=>n.reduce((t,o)=>C(t,o,"",e),{})}const ae=oe(),se=J(()=>{const e=E(new Map),n=E(),t=L(()=>{for(const c of e.value.values())if(c)return!0;return!1}),o=U({scrollBody:E(!0)});let u=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=n.value??"",T&&(u==null||u()),n.value=void 0};return P(t,(c,m)=>{var r;if(!W)return;if(!c){m&&i();return}n.value===void 0&&(n.value=document.body.style.overflow);const d=window.innerWidth-document.documentElement.clientWidth,h={padding:d,margin:0},s=(r=o.scrollBody)!=null&&r.value?typeof o.scrollBody.value=="object"?ae({padding:o.scrollBody.value.padding===!0?d:o.scrollBody.value.padding,margin:o.scrollBody.value.margin===!0?d:o.scrollBody.value.margin},h):h:{padding:0,margin:0};d>0&&(document.body.style.paddingRight=typeof s.padding=="number"?`${s.padding}px`:String(s.padding),document.body.style.marginRight=typeof s.margin=="number"?`${s.margin}px`:String(s.margin),document.documentElement.style.setProperty("--scrollbar-width",`${d}px`),document.body.style.overflow="hidden"),T&&(u=X(document,"touchmove",a=>ue(a),{passive:!1})),x(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function Ae(e){const n=Math.random().toString(36).substring(2,7),t=se();t.value.set(n,e??!1);const o=L({get:()=>t.value.get(n)??!1,set:u=>t.value.set(n,u)});return z(()=>{t.value.delete(n)}),o}function j(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientWidth<e.scrollWidth||n.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!(t instanceof Element)||t.tagName==="BODY"?!1:j(t)}}function ue(e){const n=e||window.event,t=n.target;return t instanceof Element&&j(t)?!1:n.touches.length>1?!0:(n.preventDefault&&n.cancelable&&n.preventDefault(),!1)}var ie=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},g=new WeakMap,w=new WeakMap,S={},F=0,K=function(e){return e&&(e.host||K(e.parentNode))},ce=function(e,n){return n.map(function(t){if(e.contains(t))return t;var o=K(t);return o&&e.contains(o)?o:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(t){return!!t})},le=function(e,n,t,o){var u=ce(n,Array.isArray(e)?e:[e]);S[t]||(S[t]=new WeakMap);var i=S[t],c=[],m=new Set,d=new Set(u),h=function(r){!r||m.has(r)||(m.add(r),h(r.parentNode))};u.forEach(h);var s=function(r){!r||d.has(r)||Array.prototype.forEach.call(r.children,function(a){if(m.has(a))s(a);else try{var p=a.getAttribute(o),l=p!==null&&p!=="false",f=(g.get(a)||0)+1,v=(i.get(a)||0)+1;g.set(a,f),i.set(a,v),c.push(a),f===1&&l&&w.set(a,!0),v===1&&a.setAttribute(t,"true"),l||a.setAttribute(o,"true")}catch(y){console.error("aria-hidden: cannot operate on ",a,y)}})};return s(n),m.clear(),F++,function(){c.forEach(function(r){var a=g.get(r)-1,p=i.get(r)-1;g.set(r,a),i.set(r,p),a||(w.has(r)||r.removeAttribute(o),w.delete(r)),p||r.removeAttribute(t)}),F--,F||(g=new WeakMap,g=new WeakMap,w=new WeakMap,S={})}},fe=function(e,n,t){t===void 0&&(t="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),u=ie(e);return u?(o.push.apply(o,Array.from(u.querySelectorAll("[aria-live], script"))),le(o,u,t,"aria-hidden")):function(){return null}};function Oe(e){let n;P(()=>V(e),t=>{t?n=fe(t):n&&n()}),N(()=>{n&&n()})}const de=Q(()=>E([]));function pe(){const e=de();return{add(n){const t=e.value[0];n!==t&&(t==null||t.pause()),e.value=D(e.value,n),e.value.unshift(n)},remove(n){var t;e.value=D(e.value,n),(t=e.value[0])==null||t.resume()}}}function D(e,n){const t=[...e],o=t.indexOf(n);return o!==-1&&t.splice(o,1),t}var ve=R({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:n}){const t=e,o=n,{currentRef:u,currentElement:i}=Z(),c=E(null),m=pe(),d=G({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});B(s=>{if(!W)return;const r=i.value;if(!t.trapped)return;function a(v){if(d.paused||!r)return;const y=v.target;r.contains(y)?c.value=y:b(c.value,{select:!0})}function p(v){if(d.paused||!r)return;const y=v.relatedTarget;y!==null&&(r.contains(y)||b(c.value,{select:!0}))}function l(v){r.contains(c.value)||b(r)}document.addEventListener("focusin",a),document.addEventListener("focusout",p);const f=new MutationObserver(l);r&&f.observe(r,{childList:!0,subtree:!0}),s(()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",p),f.disconnect()})}),B(async s=>{const r=i.value;if(await x(),!r)return;m.add(d);const a=A();if(!r.contains(a)){const l=new CustomEvent(O,M);r.addEventListener(O,f=>o("mountAutoFocus",f)),r.dispatchEvent(l),l.defaultPrevented||(te(ne(r),{select:!0}),A()===a&&b(r))}s(()=>{r.removeEventListener(O,v=>o("mountAutoFocus",v));const l=new CustomEvent(_,M),f=v=>{o("unmountAutoFocus",v)};r.addEventListener(_,f),r.dispatchEvent(l),setTimeout(()=>{l.defaultPrevented||b(a??document.body,{select:!0}),r.removeEventListener(_,f),m.remove(d)},0)})});function h(s){if(!t.loop&&!t.trapped||d.paused)return;const r=s.key==="Tab"&&!s.altKey&&!s.ctrlKey&&!s.metaKey,a=A();if(r&&a){const p=s.currentTarget,[l,f]=re(p);l&&f?!s.shiftKey&&a===f?(s.preventDefault(),t.loop&&b(l,{select:!0})):s.shiftKey&&a===l&&(s.preventDefault(),t.loop&&b(f,{select:!0})):a===p&&s.preventDefault()}}return(s,r)=>(q(),I(Y(ee),{ref_key:"currentRef",ref:u,tabindex:"-1","as-child":s.asChild,as:s.as,onKeydown:h},{default:$(()=>[H(s.$slots,"default")]),_:3},8,["as-child","as"]))}}),_e=ve;export{_e as F,Oe as a,Ae as u};
